<div id="userData" *ngIf="!editUser">

<H2>User account data for {{user.firstName}}</H2>

<div class="card mb-3" style="max-width: 540px;">
  <div class="row g-0">
    <div class="col-md-4">
      <img [src]="user.avatarUrl" class="img-fluid rounded-start" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">{{user.firstName}} {{user.lastName}}</h5>
        <p class="card-text">{{user.email}}</p>
        <p class="card-text">{{user.aboutMe}}</p>
        <p class="card-text">{{user.address?.street}} {{user.address?.city}}, {{user.address?.state}}  {{user.address?.zip}}</p>
        <p class="card-text"><small class="text-muted">Member since: {{user.dateCreated}}</small></p>
      </div>
    </div>
  </div>
</div>

  <button class="btn btn-outline-primary" (click)="setEditUser()">Edit your info</button>
  <button class="btn btn-outline-danger" (click)="deleteUserAccount()">Delete your account</button>
  <a *ngIf="isAdmin" routerLink="/admin"><button class="btn btn-outline-success" > Admin Settings</button></a>
</div>


<div id="userDataEdit" *ngIf="editUser">
  <h2>Edit your account information:</h2>
  <form>
    <label for="firstName">First Name </label>
    <input type="text" name="firstName" [(ngModel)]="editUser.firstName" /> <br />
    <label for="lastName">Last Name </label>
    <input type="text" name="lastName" [(ngModel)]="editUser.lastName" /> <br />
    <label for="email">Email Address </label>
    <input type="text" name="email" [(ngModel)]="editUser.email" /> <br />
    <label for="aboutMe">About Me </label>
    <input type="text" name="aboutMe" [(ngModel)]="editUser.aboutMe" /> <br />

    <label for="avatarUrl">Avatar URL</label>
    <input type="text" name="avatarUrl" [(ngModel)]="editUser.avatarUrl" /> <br />

    <div *ngIf="editUser.address">
    <label for="street">Street Address</label>
    <input type="text" name="street" [(ngModel)]="editUser.address.street" /> <br />
    <label for="street2">Unit</label>
    <input type="text" name="street2" [(ngModel)]="editUser.address.street2" /> <br />
    <label for="city">City</label>
    <input type="text" name="city" [(ngModel)]="editUser.address.city" /> <br />
    <label for="state">State</label>
    <input type="text" name="state" [(ngModel)]="editUser.address.state" /> <br />
    <label for="zip">Zip Code</label>
    <input type="text" name="zip" [(ngModel)]="editUser.address.zip" /> <br />
    </div>

    <button class="btn btn-danger" (click)="editUser = null">Cancel</button>
    <!-- <button class="btn btn-success" (click)="updateUser(editUser.id, editUser)">Save</button> -->
    <button class="btn btn-success" (click)="updateUser(editUser)">Save</button>
  </form>

  <!-- Create Address form with field addAddress.
    Then get address id after it has been added.
    Make a newAddress field and set it to data from the addAddress function.
    Then set editUser.address to newAddress.
    Then call updateUser(editUser)
Will need address service for a create and a show method. Create address controller in Boot project -->

</div>

<div *ngIf="editUser && !editUser.address">
  <form>
    <div class="form-group">
      <div class="row">
        <div class="col-auto">
          <label for="street"><b>Street Address: </b></label>
        </div>
        <div class="col col-auto">
          <input
            id="street"
            type="text"
            name="street"
            placeholder="Street Address"
            [(ngModel)]="addAddress.street"
          />
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col-auto">
          <label for="street2"><b>Unit:  </b></label>
        </div>
        <div class="col col-auto">
           <input
            id="street2"
            type="text"
            name="street2"
            placeholder="Unit"
            [(ngModel)]="addAddress.street2"
          />
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col-auto">
          <label for="city"><b>City:  </b></label>
        </div>
        <div class="col col-auto">
           <input
            id="city"
            type="text"
            name="city"
            placeholder="City"
            [(ngModel)]="addAddress.city"
          />
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col-auto">
          <label for="state"><b>State:  </b></label>
        </div>
        <div class="col col-auto">
           <input
            id="state"
            type="text"
            name="state"
            placeholder="State"
            [(ngModel)]="addAddress.state"
          />
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col-auto">
          <label for="zip"><b>Zip Code:  </b></label>
        </div>
        <div class="col col-auto">
           <input
            id="zip"
            type="text"
            name="zip"
            placeholder="Zip Code"
            [(ngModel)]="addAddress.zip"
          />
        </div>
      </div>
    </div>
    <input
      class="btn btn-secondary"
      type="submit"
      name="addAddress"
      value="Add Address"
      (click)="addressAdd(addAddress)"
    />
  </form>
</div>

